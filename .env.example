# ============================================
# BROKER CONFIGURATION
# ============================================
# Choose your broker: 'upstox' or 'zerodha'
BROKER=upstox

# Trading mode: 'paper' (fake money) or 'live' (real money)
TRADING_MODE=paper

# ============================================
# UPSTOX BROKER
# ============================================
# Get from: https://developer.upstox.com/
UPSTOX_API_KEY=your-upstox-api-key
UPSTOX_API_SECRET=your-upstox-api-secret
UPSTOX_ACCESS_TOKEN=your-upstox-access-token

# ============================================
# ZERODHA BROKER (Alternative)
# ============================================
# Get from: https://kite.trade/
ZERODHA_API_KEY=your-zerodha-api-key
ZERODHA_API_SECRET=your-zerodha-api-secret
ZERODHA_ACCESS_TOKEN=your-zerodha-access-token

# ============================================
# CAPITAL & RISK
# ============================================
INITIAL_CAPITAL=100000          # Starting capital (Rs.)
HARD_STOP_LOSS=80000            # Kill switch - stop ALL trading below this
MAX_DAILY_LOSS_PCT=0.05         # 5% max loss per day
MAX_PER_TRADE_RISK_PCT=0.02     # 2% max risk per trade
MAX_POSITION_PCT=0.25           # 25% max capital per position
BASE_POSITION_PCT=0.15          # Base position size
MAX_POSITIONS=3                 # Max concurrent open positions
TARGET_DAILY_RETURN_PCT=0.03    # 3% daily target (middle of 2-5%)

# ============================================
# MARKET HOURS
# ============================================
PRE_MARKET_START=8:45           # Wake up time for preparation
MARKET_OPEN=9:15                # NSE market open
ENTRY_WINDOW_START=9:30         # Start placing trades
ENTRY_WINDOW_END=14:30          # No new trades after this
SQUARE_OFF_START=15:00          # Begin exiting positions
SQUARE_OFF_TIME=15:15           # Force exit all positions
MARKET_CLOSE=15:30              # NSE market close
POST_MARKET_END=16:00           # Post-market reporting

# ============================================
# SIGNAL THRESHOLDS (7-Model Ensemble)
# ============================================
MIN_CONFIDENCE=0.60             # Min signal confidence to trade
MIN_RISK_REWARD=1.5             # Min risk:reward ratio
MIN_MODEL_AGREEMENT=3           # Min models that must agree (3-7)
ENABLE_BUY_SIGNALS=true         # Enable BUY signals
ENABLE_SELL_SIGNALS=false       # SELL disabled (28.6% accuracy)
SIGNAL_CACHE_MINUTES=5          # Cache signals for N minutes
MIN_STOP_DISTANCE_PCT=0.005     # Min stop loss distance (0.5%)
MAX_STOP_DISTANCE_PCT=0.03      # Max stop loss distance (3%)

# ============================================
# STRATEGY PARAMETERS
# ============================================
SUPERTREND_PERIOD=7
SUPERTREND_MULTIPLIER=2.5
RSI_PERIOD=14
RSI_OVERSOLD=30
RSI_OVERBOUGHT=70
ADX_PERIOD=14
ADX_STRONG_TREND=25             # Only trade when ADX > this
VOLUME_THRESHOLD=1.5            # Volume > 1.5x average required
TARGET_MULTIPLIER=1.5           # Target = 1.5x risk
TRAILING_START_PCT=0.01         # Start trailing at 1% profit
TRAILING_DISTANCE_PCT=0.005     # Trail 0.5% behind price

# ============================================
# ORDER EXECUTION
# ============================================
MAX_SLIPPAGE_PCT=0.005          # 0.5% max slippage allowed
ORDER_TIMEOUT_SECONDS=30        # Wait for order fill
ORDER_RETRY_COUNT=3             # Retry failed orders
ORDER_RETRY_DELAY=2.0           # Seconds between retries
USE_LIMIT_ORDERS=true           # Use LIMIT instead of MARKET

# ============================================
# INTERVALS (how often to poll)
# ============================================
SIGNAL_REFRESH_SECONDS=900      # Refresh signals every 15 min
POSITION_CHECK_SECONDS=60       # Check positions every 1 min
QUOTE_REFRESH_SECONDS=30        # Refresh quotes every 30 sec
NEWS_CHECK_SECONDS=1800         # Check news for held positions every 30 min

# ============================================
# WATCHLIST (comma-separated symbols)
# ============================================
# WATCHLIST=RELIANCE,TCS,HDFCBANK,INFY,ICICIBANK,SBIN,BHARTIARTL,ITC

# ============================================
# API PROVIDER SYSTEM
# ============================================
# Provider priority order (comma-separated). System rotates to next on failure.
NEWS_PROVIDERS=newsapi,gnews,finnhub,rss
PRICE_PROVIDERS=yfinance
LLM_PROVIDERS=openai

# ============================================
# API KEYS
# ============================================
# OpenAI (for news analysis + signal reasoning)
OPENAI_API_KEY=sk-your-key-here

# News data (at least one recommended)
NEWS_API_KEY=your-newsapi-org-key       # newsapi.org (100/day free)
GNEWS_API_KEY=your-gnews-key            # gnews.io (100/day free)
FINNHUB_API_KEY=your-finnhub-key        # finnhub.io (60/min free, unlimited daily)

# Optional
FIRECRAWL_API_KEY=fc-your-key-here
ALPHA_VANTAGE_KEY=your-alpha-vantage-key

# ============================================
# API RATE LIMITS & QUOTAS
# ============================================
# Per-provider limits (defaults match free tier)
NEWSAPI_DAILY_LIMIT=100
GNEWS_DAILY_LIMIT=100
FINNHUB_RPM=60
YFINANCE_RPM=60
YFINANCE_RPS=2
OPENAI_RPM=180
OPENAI_DAILY_COST_CAP=5.0              # USD daily safety cap

# Health & cooldown
UNHEALTHY_THRESHOLD=5                   # Consecutive failures before skip
QUOTA_ALERT_PCT=0.80                    # Telegram alert at 80% quota

# Cache TTLs (seconds)
NEWS_CACHE_TTL=1800                     # 30 min
PRICE_CACHE_TTL=300                     # 5 min
LLM_CACHE_TTL=21600                     # 6 hours

# ============================================
# TELEGRAM NOTIFICATIONS (Optional)
# ============================================
# Create a bot via @BotFather, get chat ID via @userinfobot
TELEGRAM_BOT_TOKEN=your-bot-token
TELEGRAM_CHAT_ID=your-chat-id

# ============================================
# SIGNAL ENGINE SETTINGS (config/settings.py)
# ============================================
# These are used by the signal generation engine
TOP_N_PICKS=10                  # Number of top recommendations
NEWS_LOOKBACK_HOURS=168         # 7 days of news history
LOOKBACK_DAYS=365               # 1 year of price data
INTRADAY_TARGET_PCT=0.5         # Target 0.5% for intraday
SWING_TARGET_PCT=1.0            # Target 1% for swing trades
SWING_HORIZON_DAYS=5            # 5-day swing holding period
MAX_SECTOR_CONCENTRATION=3      # Max stocks from same sector
MAX_ATR_PERCENT=5.0             # Max 5% ATR (volatility cap)
MIN_LIQUIDITY_CR=10.0           # Min â‚¹10 Cr daily volume

# ============================================
# ADVANCED MODEL SETTINGS
# ============================================
# These control the 7-model ensemble behavior
USE_7_MODEL_ENSEMBLE=true       # Use full 7-model ensemble
USE_MACRO_ENGINE=true           # Enable macro indicators
USE_ALTERNATIVE_DATA=true       # Enable alternative data
USE_ADVANCED_MATH=true          # Enable advanced math models

# ============================================
# LOGGING & DEBUG
# ============================================
LOG_LEVEL=INFO                  # DEBUG, INFO, WARNING, ERROR
ENABLE_TELEGRAM_ALERTS=true     # Enable/disable Telegram notifications
